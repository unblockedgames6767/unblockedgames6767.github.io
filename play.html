<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title id="pageTitle">Play Free Unblocked Games ‚Äì UnblockedGames67</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9093695432438078"
     crossorigin="anonymous"></script>
    <meta name="google-adsense-account" content="ca-pub-9093695432438078">
    <meta name="description" id="pageDesc" content="Play free unblocked games at school on UnblockedGames67. Slope, Retro Bowl, Poly Track, 1v1.LOL & more ‚Äî no downloads, always free!">
    <meta name="keywords" content="unblocked games 67, play unblocked game online, free browser game no download, unblocked games at school">
    <link rel="canonical" id="pageCanonical" href="https://unblockedgames6767.github.io/play.html">
    <link rel="icon" type="image/x-icon" href="assets/img/icon/main.png">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large">
    <meta property="og:type" content="website">
    <meta property="og:url" id="ogUrl" content="https://unblockedgames6767.github.io/play.html">
    <meta property="og:title" id="ogTitle" content="Play Free Unblocked Games ‚Äì UnblockedGames67">
    <meta property="og:description" id="ogDesc" content="Play free unblocked games at school ‚Äî no downloads, no sign-up, always free on UnblockedGames67!">
    <meta property="og:image" id="ogImage" content="https://unblockedgames6767.github.io/assets/img/icon/main.png">
    <meta property="og:site_name" content="UnblockedGames67">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" id="twTitle" content="Play Free Unblocked Games ‚Äì UnblockedGames67">
    <meta name="twitter:description" id="twDesc" content="Play free unblocked games at school on UnblockedGames67!">
    <meta name="twitter:image" id="twImage" content="https://unblockedgames6767.github.io/assets/img/icon/main.png">
    <meta name="theme-color" content="#00F5D4">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="UnblockedGames67">
    <script type="application/ld+json" id="gameSchema">{"@context":"https://schema.org","@type":"WebPage","name":"Play Free Unblocked Games","url":"https://unblockedgames6767.github.io/play.html","isPartOf":{"@type":"WebSite","name":"Unblocked Games 67","url":"https://unblockedgames6767.github.io/"}}</script>
    <script type="application/ld+json" id="breadcrumbSchema">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://unblockedgames6767.github.io/"},{"@type":"ListItem","position":2,"name":"Play Game","item":"https://unblockedgames6767.github.io/play.html"}]}</script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Barlow+Condensed:wght@400;600;700;800&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script>
    <style>
        :root {
            --cyan:#00F5D4; --pink:#FF006E; --yellow:#FFD500; --purple:#9B5DE5;
            --bg:#06060a; --bg-card:#0e0e16; --bg-elevated:#14141f;
            --border:rgba(0,245,212,0.15); --border-bright:rgba(0,245,212,0.6);
            --text:#e8e8f0; --text-dim:#6e6e88;
            --glow-cyan:0 0 20px rgba(0,245,212,0.4),0 0 60px rgba(0,245,212,0.15);
            --glow-yellow:0 0 20px rgba(255,213,0,0.4);
        }
        [data-theme="light"] {
            --bg:#f0f2f8; --bg-card:#fff; --bg-elevated:#e8eaf0;
            --border:rgba(0,150,120,0.2); --border-bright:rgba(0,150,120,0.5);
            --text:#0a0a14; --text-dim:#555570;
        }
        *{margin:0;padding:0;box-sizing:border-box}
        html{scroll-behavior:smooth}
        body{font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden}
        body::before{content:'';position:fixed;inset:0;background-image:radial-gradient(circle,rgba(0,245,212,0.05) 1px,transparent 1px);background-size:32px 32px;pointer-events:none;z-index:0}

        /* NAV */
        nav{position:sticky;top:0;z-index:1000;background:rgba(6,6,10,0.9);backdrop-filter:blur(20px);border-bottom:1px solid var(--border-bright);padding:0 1.5rem;height:56px;display:flex;align-items:center;gap:1rem}
        .nav-logo{display:flex;align-items:center;gap:0.6rem;text-decoration:none;flex-shrink:0}
        .nav-logo-badge{background:var(--cyan);color:#000;font-family:'Bungee',cursive;font-size:0.9rem;width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;box-shadow:var(--glow-cyan)}
        .nav-logo-text{font-family:'Bungee',cursive;font-size:0.85rem;color:var(--text)}
        .nav-logo-text span{color:var(--cyan)}
        .nav-back{display:flex;align-items:center;gap:0.4rem;background:var(--bg-elevated);border:1px solid var(--border);color:var(--text-dim);padding:0.4rem 0.9rem;border-radius:6px;font-size:0.82rem;font-family:'Barlow Condensed',sans-serif;font-weight:600;letter-spacing:0.06em;text-transform:uppercase;cursor:pointer;text-decoration:none;transition:all 0.2s}
        .nav-back:hover{border-color:var(--cyan);color:var(--cyan)}
        .nav-game-title{font-family:'Bungee',cursive;font-size:1rem;color:var(--text);flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:300px}
        .nav-right{margin-left:auto;display:flex;gap:0.6rem;align-items:center}
        .streak-badge{display:flex;align-items:center;gap:0.35rem;background:rgba(255,213,0,0.1);border:1px solid rgba(255,213,0,0.3);color:var(--yellow);padding:0.3rem 0.65rem;border-radius:50px;font-size:0.78rem;font-weight:700;font-family:'Barlow Condensed',sans-serif}
        .theme-toggle{background:var(--bg-elevated);border:1px solid var(--border);color:var(--text-dim);width:32px;height:32px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:0.8rem;transition:all 0.2s}
        .theme-toggle:hover{border-color:var(--cyan);color:var(--cyan)}

        /* LAYOUT */
        .play-layout{max-width:1500px;margin:0 auto;padding:1.5rem;display:grid;grid-template-columns:1fr 320px;gap:1.25rem;position:relative;z-index:1}
        .game-frame-wrap{display:flex;flex-direction:column;gap:1rem}
        .game-topbar{display:flex;align-items:center;gap:0.75rem;flex-wrap:wrap}
        .game-name-display{font-family:'Bungee',cursive;font-size:1.5rem;color:var(--text);flex:1}
        .game-name-display span{color:var(--cyan)}
        .game-tag-badge{font-family:'Barlow Condensed',sans-serif;font-size:0.72rem;font-weight:700;letter-spacing:0.1em;text-transform:uppercase;padding:0.25rem 0.75rem;border-radius:4px;border:1px solid var(--border-bright);color:var(--cyan)}
        .game-controls-bar{display:flex;gap:0.5rem;flex-wrap:wrap}
        .ctrl-btn{display:flex;align-items:center;gap:0.35rem;background:var(--bg-card);border:1px solid var(--border);color:var(--text-dim);padding:0.45rem 0.9rem;border-radius:6px;cursor:pointer;font-size:0.82rem;font-family:'Barlow Condensed',sans-serif;font-weight:700;letter-spacing:0.06em;text-transform:uppercase;transition:all 0.2s}
        .ctrl-btn:hover{border-color:var(--cyan);color:var(--cyan)}
        .ctrl-btn.active{background:rgba(0,245,212,0.1);border-color:var(--cyan);color:var(--cyan)}
        .ctrl-btn.pink:hover{border-color:var(--pink);color:var(--pink)}
        .ctrl-btn.pink.active{background:rgba(255,0,110,0.1);border-color:var(--pink);color:var(--pink)}

        /* GAME FRAME */
        .game-frame{background:var(--bg-card);border:1px solid var(--border);border-radius:12px;overflow:hidden;position:relative;box-shadow:0 0 40px rgba(0,245,212,0.05)}
        .game-frame.neon-border{border-color:var(--cyan);box-shadow:var(--glow-cyan)}
        .game-iframe{width:100%;height:72vh;border:none;display:block;background:#000}
        .game-loading{position:absolute;inset:0;background:var(--bg-card);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;color:var(--text-dim);font-size:0.9rem;z-index:5}
        .game-loading .spinner{width:40px;height:40px;border:3px solid var(--border);border-top-color:var(--cyan);border-radius:50%;animation:spin 0.8s linear infinite}
        @keyframes spin{to{transform:rotate(360deg)}}

        /* SIDEBAR */
        .sidebar{display:flex;flex-direction:column;gap:1.25rem;overflow-y:auto;max-height:calc(100vh - 80px);position:sticky;top:70px}
        .sidebar-panel{background:var(--bg-card);border:1px solid var(--border);border-radius:10px;overflow:hidden}
        .panel-header{padding:0.85rem 1rem;border-bottom:1px solid var(--border);font-family:'Bungee',cursive;font-size:0.85rem;color:var(--text);display:flex;align-items:center;gap:0.5rem}
        .panel-header i{color:var(--cyan)}
        .game-meta{padding:1rem}
        .game-desc{font-size:0.85rem;color:var(--text-dim);line-height:1.65;margin-bottom:1rem}
        .action-grid{display:grid;grid-template-columns:1fr 1fr;gap:0.5rem;padding:0.75rem}
        .action-btn{display:flex;align-items:center;justify-content:center;gap:0.35rem;padding:0.65rem;border-radius:7px;border:1px solid var(--border);background:var(--bg-elevated);color:var(--text-dim);font-size:0.8rem;cursor:pointer;font-family:'Barlow Condensed',sans-serif;font-weight:700;letter-spacing:0.05em;text-transform:uppercase;transition:all 0.2s}
        .action-btn:hover{border-color:var(--cyan);color:var(--cyan)}
        .rating-row{display:flex;gap:0.3rem;padding:0 1rem 1rem}
        .star{font-size:1.3rem;cursor:pointer;color:var(--text-dim);transition:color 0.15s,transform 0.15s}
        .star:hover,.star.active{color:var(--yellow);transform:scale(1.2)}
        .playtime-display{padding:0.75rem 1rem;border-top:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
        .playtime-label{font-size:0.75rem;font-family:'Barlow Condensed',sans-serif;font-weight:700;letter-spacing:0.08em;text-transform:uppercase;color:var(--text-dim)}
        .playtime-value{font-family:'Bungee',cursive;font-size:1rem;color:var(--cyan)}
        .achievements-list{padding:0.75rem;display:flex;flex-direction:column;gap:0.4rem}
        .achievement-item{display:flex;align-items:center;gap:0.6rem;padding:0.5rem 0.65rem;border-radius:6px;background:var(--bg-elevated)}
        .achievement-item.locked{opacity:0.45}
        .achievement-icon{font-size:1.2rem}
        .achievement-name{font-family:'Barlow Condensed',sans-serif;font-weight:700;font-size:0.82rem;color:var(--text)}
        .achievement-desc{font-size:0.72rem;color:var(--text-dim)}
        .achievement-check{margin-left:auto;color:var(--cyan);font-size:0.8rem}
        .recommended-list{display:flex;flex-direction:column}
        .rec-item{display:flex;align-items:center;gap:0.75rem;padding:0.6rem 0.85rem;border-bottom:1px solid var(--border);cursor:pointer;text-decoration:none;transition:background 0.15s}
        .rec-item:last-child{border-bottom:none}
        .rec-item:hover{background:rgba(0,245,212,0.04)}
        .rec-img{width:44px;height:44px;object-fit:cover;border-radius:6px;border:1px solid var(--border);flex-shrink:0}
        .rec-name{font-family:'Barlow Condensed',sans-serif;font-weight:700;font-size:0.88rem;color:var(--text)}
        .rec-tag{font-size:0.7rem;color:var(--text-dim)}
        .chart-wrap{padding:0.75rem}
        .notes-wrap{padding:0.75rem}
        .notes-wrap textarea{width:100%;background:var(--bg-elevated);border:1px solid var(--border);border-radius:6px;color:var(--text);padding:0.65rem 0.75rem;font-size:0.83rem;resize:vertical;min-height:80px;font-family:'DM Sans',sans-serif;outline:none;transition:border-color 0.2s}
        .notes-wrap textarea:focus{border-color:var(--cyan)}
        .save-notes-btn{width:100%;margin-top:0.5rem;background:var(--cyan);color:#000;border:none;border-radius:6px;padding:0.5rem;font-family:'Barlow Condensed',sans-serif;font-weight:800;font-size:0.82rem;letter-spacing:0.08em;text-transform:uppercase;cursor:pointer;transition:opacity 0.2s}
        .save-notes-btn:hover{opacity:0.85}

        /* TOAST */
        .toast{position:fixed;bottom:2rem;right:2rem;background:var(--bg-elevated);border:1px solid var(--cyan);border-radius:8px;padding:0.75rem 1.1rem;display:none;align-items:center;gap:0.6rem;box-shadow:var(--glow-cyan);z-index:9000;animation:slideUp 0.3s ease}
        .toast.active{display:flex}
        @keyframes slideUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}
        .toast i{color:var(--cyan)}
        .toast-text{font-family:'Barlow Condensed',sans-serif;font-weight:600;font-size:0.88rem}

        /* ACHIEVEMENT TOAST */
        .achievement-toast{position:fixed;top:80px;right:2rem;background:var(--bg-elevated);border:1px solid var(--yellow);border-radius:10px;padding:1rem 1.25rem;display:none;align-items:center;gap:1rem;box-shadow:var(--glow-yellow);z-index:9001;max-width:320px}
        .achievement-toast.active{display:flex}
        .achievement-toast-title{font-family:'Bungee',cursive;font-size:0.9rem;color:var(--yellow)}
        .achievement-toast-name{font-weight:700;font-size:0.85rem;color:var(--text);margin-top:0.2rem}

        /* MODALS */
        .modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.7);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;z-index:8000;padding:1rem}
        .modal-overlay.active{display:flex}
        .modal-box{background:var(--bg-card);border:1px solid var(--border-bright);border-radius:14px;padding:1.75rem;max-width:520px;width:100%;box-shadow:var(--glow-cyan);max-height:80vh;overflow-y:auto}
        .modal-title{font-family:'Bungee',cursive;font-size:1.3rem;color:var(--text);margin-bottom:1.25rem;display:flex;align-items:center;gap:0.5rem}
        .modal-title i{color:var(--cyan)}
        .modal-close{float:right;background:none;border:none;color:var(--text-dim);font-size:1.1rem;cursor:pointer;transition:color 0.2s}
        .modal-close:hover{color:var(--pink)}
        .shortcut-row{display:flex;justify-content:space-between;align-items:center;padding:0.6rem 0;border-bottom:1px solid var(--border);font-size:0.88rem;color:var(--text-dim)}
        .shortcut-row:last-child{border-bottom:none}
        .shortcut-key{background:var(--bg-elevated);border:1px solid var(--border);border-radius:4px;padding:0.2rem 0.5rem;font-size:0.78rem;font-family:'Barlow Condensed',sans-serif;font-weight:700;color:var(--cyan);letter-spacing:0.06em}
        .achievement-grid{display:grid;grid-template-columns:1fr 1fr;gap:0.75rem}
        .achievement-card{background:var(--bg-elevated);border:1px solid var(--border);border-radius:8px;padding:0.85rem;display:flex;flex-direction:column;gap:0.3rem}
        .achievement-card.unlocked{border-color:var(--cyan)}
        .achievement-card.locked{opacity:0.4}
        .achievement-card .ach-icon{font-size:1.5rem}
        .achievement-card .ach-name{font-weight:700;font-size:0.85rem}
        .achievement-card .ach-desc{font-size:0.75rem;color:var(--text-dim)}

        @media(max-width:900px){
            .play-layout{grid-template-columns:1fr}
            .sidebar{position:static;max-height:none}
            .game-iframe{height:55vw;min-height:300px}
        }
        @media(max-width:600px){
            .play-layout{padding:0.75rem}
            .game-name-display{font-size:1.1rem}
        }
    </style>
</head>
<body>

<nav>
    <a href="/" class="nav-logo">
        <div class="nav-logo-badge">67</div>
        <div class="nav-logo-text">UB<span>67</span></div>
    </a>
    <a href="/" class="nav-back"><i class="fas fa-arrow-left"></i> All Games</a>
    <span class="nav-game-title" id="navGameTitle">Loading...</span>
    <div class="nav-right">
        <div class="streak-badge" id="streakBadge">üî• <span id="streakCount">0</span></div>
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme"><i class="fas fa-moon"></i></button>
    </div>
</nav>

<div class="play-layout">
    <!-- Left: Game Frame -->
    <div class="game-frame-wrap">
        <div class="game-topbar">
            <div class="game-name-display" id="gameNameDisplay">Loading...</div>
            <span class="game-tag-badge" id="gameTagBadge">game</span>
            <div class="game-controls-bar" style="margin-left:auto;">
                <button class="ctrl-btn" id="fullscreenBtn" title="Fullscreen (F)">
                    <i class="fas fa-expand"></i> Full
                </button>
                <button class="ctrl-btn" id="refreshBtn" title="Refresh (R)">
                    <i class="fas fa-redo"></i>
                </button>
                <button class="ctrl-btn pink" id="favoriteBtn" title="Favorite (H)">
                    <i class="far fa-heart"></i> Fave
                </button>
                <button class="ctrl-btn" id="shareBtn" title="Share">
                    <i class="fas fa-share-alt"></i>
                </button>
                <button class="ctrl-btn" id="shortcutsBtn" title="Shortcuts (?)">
                    <i class="fas fa-keyboard"></i>
                </button>
            </div>
        </div>

        <div class="game-frame" id="gameFrame">
            <div class="game-loading" id="gameLoading">
                <div class="spinner"></div>
                <span>Loading game...</span>
            </div>
            <iframe id="gameIframe" class="game-iframe" allowfullscreen
                allow="autoplay; fullscreen; payment" title="Unblocked Game"></iframe>
        </div>

        <div id="gameCredits" style="font-size:0.75rem;color:var(--text-dim);margin-top:0.25rem;"></div>

        <!-- AdSense: Below-Game -->
        <div style="margin-top:1rem;text-align:center;" aria-label="Advertisement">
            <p style="font-size:0.65rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:0.08em;margin-bottom:0.3rem;font-family:'Barlow Condensed',sans-serif;">Advertisement</p>
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                 data-ad-slot="3333333333"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        </div>
    </div>

    <!-- Right: Sidebar -->
    <div class="sidebar">
        <!-- Info panel -->
        <div class="sidebar-panel">
            <div class="panel-header"><i class="fas fa-gamepad"></i> Game Info</div>
            <div class="game-meta">
                <div class="game-desc" id="gameDescription">Loading game description...</div>
                <div style="font-size:0.75rem;color:var(--text-dim);" id="gameCreditsSmall"></div>
            </div>
            <div class="playtime-display">
                <span class="playtime-label"><i class="fas fa-clock"></i> Your Playtime</span>
                <span class="playtime-value" id="playtimeDisplay">0:00</span>
            </div>
            <div style="padding:0 1rem 0.75rem;">
                <div style="font-size:0.72rem;color:var(--text-dim);font-family:'Barlow Condensed',sans-serif;font-weight:700;letter-spacing:0.1em;text-transform:uppercase;margin-bottom:0.5rem;">Rate this game</div>
                <div class="rating-row">
                    <span class="star" data-rating="1">‚òÖ</span>
                    <span class="star" data-rating="2">‚òÖ</span>
                    <span class="star" data-rating="3">‚òÖ</span>
                    <span class="star" data-rating="4">‚òÖ</span>
                    <span class="star" data-rating="5">‚òÖ</span>
                </div>
            </div>
        </div>

        <!-- Quick actions -->
        <div class="sidebar-panel">
            <div class="panel-header"><i class="fas fa-bolt"></i> Quick Actions</div>
            <div class="action-grid">
                <button class="action-btn" id="achievementsBtn"><i class="fas fa-trophy"></i> Achievements</button>
                <button class="action-btn" id="shortcutsBtnSide"><i class="fas fa-keyboard"></i> Shortcuts</button>
                <button class="action-btn" id="newTabBtn"><i class="fas fa-external-link-alt"></i> New Tab</button>
                <button class="action-btn" id="copyLinkBtn"><i class="fas fa-link"></i> Copy Link</button>
            </div>
        </div>

        <!-- Session stats -->
        <div class="sidebar-panel">
            <div class="panel-header"><i class="fas fa-chart-bar"></i> Session Stats</div>
            <div class="chart-wrap">
                <canvas id="playtimeChart" height="120"></canvas>
                <div style="text-align:center;margin-top:0.5rem;font-size:0.75rem;color:var(--text-dim);font-family:'Barlow Condensed',sans-serif;">Playtime over last 7 days (minutes)</div>
            </div>
        </div>

        <!-- Achievements -->
        <div class="sidebar-panel">
            <div class="panel-header"><i class="fas fa-trophy"></i> Achievements</div>
            <div class="achievements-list" id="achievementsList">Loading...</div>
        </div>

        <!-- Recommended -->
        <div class="sidebar-panel">
            <div class="panel-header"><i class="fas fa-th-large"></i> More Like This</div>
            <div class="recommended-list" id="recommendedGames">Loading...</div>
        </div>

        <!-- Notes -->
        <div class="sidebar-panel">
            <div class="panel-header"><i class="fas fa-sticky-note"></i> Notes</div>
            <div class="notes-wrap">
                <textarea id="gameNotes" placeholder="Your notes for this game..."></textarea>
                <button class="save-notes-btn" id="saveNotesBtn">Save Notes</button>
            </div>
        </div>
    </div>
</div>

<!-- Toast -->
<div class="toast" id="toast">
    <i class="fas fa-check-circle"></i>
    <span class="toast-text" id="toastMessage">Done!</span>
</div>

<!-- Achievement popup -->
<div class="achievement-toast" id="achievementToast">
    <div style="font-size:2rem;" id="achievementToastIcon">üèÜ</div>
    <div>
        <div class="achievement-toast-title">Achievement Unlocked!</div>
        <div class="achievement-toast-name" id="achievementToastName"></div>
    </div>
</div>

<!-- Shortcuts modal -->
<div class="modal-overlay" id="shortcutsModal">
    <div class="modal-box">
        <button class="modal-close" id="closeShortcutsModal"><i class="fas fa-times"></i></button>
        <div class="modal-title"><i class="fas fa-keyboard"></i> Keyboard Shortcuts</div>
        <div class="shortcut-row"><span>Fullscreen</span><span class="shortcut-key">F</span></div>
        <div class="shortcut-row"><span>Refresh game</span><span class="shortcut-key">R</span></div>
        <div class="shortcut-row"><span>Favorite</span><span class="shortcut-key">H</span></div>
        <div class="shortcut-row"><span>Share / Copy link</span><span class="shortcut-key">Shift+S</span></div>
        <div class="shortcut-row"><span>Achievements</span><span class="shortcut-key">A</span></div>
        <div class="shortcut-row"><span>This help</span><span class="shortcut-key">?</span></div>
        <div class="shortcut-row"><span>Close modal</span><span class="shortcut-key">Esc</span></div>
    </div>
</div>

<!-- Achievements modal -->
<div class="modal-overlay" id="achievementsModal">
    <div class="modal-box">
        <button class="modal-close" id="closeAchievementsModal"><i class="fas fa-times"></i></button>
        <div class="modal-title"><i class="fas fa-trophy"></i> All Achievements</div>
        <div class="achievement-grid" id="allAchievementsGrid"></div>
    </div>
</div>

<!-- Cookie consent -->
<div id="cookieBanner" style="position:fixed;bottom:0;left:0;right:0;z-index:99999;background:var(--bg-elevated);border-top:1px solid var(--border-bright);padding:0.85rem 1.5rem;display:none;align-items:center;justify-content:space-between;gap:1rem;flex-wrap:wrap;box-shadow:0 -4px 20px rgba(0,0,0,0.4);">
    <p style="font-size:0.82rem;color:var(--text-dim);margin:0;flex:1;min-width:200px;">
        üç™ We use cookies for analytics and Google AdSense ads. See our <a href="privacy.html" style="color:var(--cyan);">Privacy Policy</a>.
    </p>
    <button onclick="document.getElementById('cookieBanner').style.display='none';localStorage.setItem('cookieConsent','1');" style="padding:0.45rem 1.2rem;background:var(--cyan);border:none;border-radius:6px;color:#000;font-family:'Barlow Condensed',sans-serif;font-weight:800;font-size:0.8rem;letter-spacing:0.06em;text-transform:uppercase;cursor:pointer;flex-shrink:0;">
        Accept
    </button>
</div>

<script>
    // ‚ïê‚ïê‚ïê STATE ‚ïê‚ïê‚ïê
    let allGames = [];
    let currentGame = null;
    let currentGameUrl = null;
    let playtimeInterval = null;
    let sessionStartTime = Date.now();
    let playtimeChart = null;

    const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');

    const allAchievements = [
        { id:'time_5min',   name:'5 Minute Player',      desc:'Play for 5 minutes',    time:300,   icon:'‚è±Ô∏è' },
        { id:'time_30min',  name:'30 Min Enthusiast',    desc:'Play for 30 minutes',   time:1800,  icon:'üéñÔ∏è' },
        { id:'time_1hr',    name:'1 Hour Champion',      desc:'Play for 1 hour',       time:3600,  icon:'üëë' },
        { id:'time_2hr',    name:'2 Hour Master',        desc:'Play for 2 hours',      time:7200,  icon:'‚≠ê' },
        { id:'time_5hr',    name:'5 Hour Legend',        desc:'Play for 5 hours',      time:18000, icon:'üî•' },
        { id:'streak_3',    name:'3 Day Streak',         desc:'Play 3 days in a row',  streak:3,   icon:'üìÖ' },
        { id:'streak_7',    name:'Week Warrior',         desc:'Play 7 days in a row',  streak:7,   icon:'üóìÔ∏è' },
        { id:'favorite',    name:'Favorite Game',        desc:'Mark as favorite',                  icon:'‚ù§Ô∏è' },
        { id:'rating',      name:'Critic',               desc:'Rate this game',                    icon:'‚≠ê' }
    ];

    // ‚ïê‚ïê‚ïê THEME ‚ïê‚ïê‚ïê
    const themeToggle = document.getElementById('themeToggle');
    const html = document.documentElement;
    const savedTheme = localStorage.getItem('theme') || 'dark';
    html.setAttribute('data-theme', savedTheme);
    themeToggle.innerHTML = savedTheme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
    themeToggle.addEventListener('click', () => {
        const t = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        html.setAttribute('data-theme', t);
        localStorage.setItem('theme', t);
        themeToggle.innerHTML = t === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
    });

    // ‚ïê‚ïê‚ïê COOKIE BANNER ‚ïê‚ïê‚ïê
    if (!localStorage.getItem('cookieConsent')) {
        document.getElementById('cookieBanner').style.display = 'flex';
    }

    // ‚ïê‚ïê‚ïê TOAST ‚ïê‚ïê‚ïê
    function showToast(message) {
        const toast = document.getElementById('toast');
        document.getElementById('toastMessage').textContent = message;
        toast.classList.add('active');
        setTimeout(() => toast.classList.remove('active'), 3000);
    }

    // ‚ïê‚ïê‚ïê ACHIEVEMENT TOAST ‚ïê‚ïê‚ïê
    function showAchievement(achievement) {
        const toast = document.getElementById('achievementToast');
        document.getElementById('achievementToastIcon').textContent = achievement.icon || 'üèÜ';
        document.getElementById('achievementToastName').textContent = achievement.name;
        toast.classList.add('active');
        setTimeout(() => toast.classList.remove('active'), 4000);
    }

    // ‚ïê‚ïê‚ïê PLAYTIME DISPLAY ‚ïê‚ïê‚ïê
    function formatTime(seconds) {
        const m = Math.floor(seconds / 60);
        const s = seconds % 60;
        return `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
    }

    function formatSeconds(sec) {
        if (sec < 60) return `${sec}s`;
        if (sec < 3600) return `${Math.floor(sec/60)}m`;
        return `${Math.floor(sec/3600)}h ${Math.floor((sec%3600)/60)}m`;
    }

    function updatePlaytimeDisplay(seconds) {
        const el = document.getElementById('playtimeDisplay');
        if (el) el.textContent = formatTime(seconds);
    }

    // ‚ïê‚ïê‚ïê STREAK ‚ïê‚ïê‚ïê
    function updateStreak() {
        const streakData = JSON.parse(localStorage.getItem('playStreak') || '{}');
        const today = new Date().toISOString().slice(0,10);
        const yesterday = new Date(Date.now() - 86400000).toISOString().slice(0,10);
        let currentStreak = streakData.current || 0;
        const lastDate = streakData.lastDate;
        if (lastDate === today) {
            // already counted
        } else if (lastDate === yesterday) {
            currentStreak++;
            streakData.current = currentStreak;
            streakData.lastDate = today;
            streakData.best = Math.max(streakData.best || 0, currentStreak);
            localStorage.setItem('playStreak', JSON.stringify(streakData));
        } else {
            currentStreak = 1;
            streakData.current = 1;
            streakData.lastDate = today;
            if (!lastDate) streakData.best = 1;
            localStorage.setItem('playStreak', JSON.stringify(streakData));
        }
        const el = document.getElementById('streakCount');
        if (el) el.textContent = `${currentStreak} day${currentStreak !== 1 ? 's' : ''}`;
        return currentStreak;
    }

    // ‚ïê‚ïê‚ïê ACHIEVEMENTS ‚ïê‚ïê‚ïê
    function checkAchievements(playtime) {
        const key = 'achievements_' + currentGameUrl;
        const unlocked = JSON.parse(localStorage.getItem(key) || '[]');
        allAchievements.forEach(a => {
            if (a.time && playtime >= a.time && !unlocked.includes(a.id)) {
                unlocked.push(a.id);
                localStorage.setItem(key, JSON.stringify(unlocked));
                showAchievement(a);
                showToast(`üéâ Achievement Unlocked: ${a.name}!`);
            }
        });
        const streak = JSON.parse(localStorage.getItem('playStreak') || '{}').current || 0;
        allAchievements.forEach(a => {
            if (a.streak && streak >= a.streak && !unlocked.includes(a.id)) {
                unlocked.push(a.id);
                localStorage.setItem(key, JSON.stringify(unlocked));
                showAchievement(a);
                showToast(`üéâ Achievement Unlocked: ${a.name}!`);
            }
        });
        renderAchievementsList();
    }

    function renderAchievementsList() {
        const list = document.getElementById('achievementsList');
        if (!list || !currentGameUrl) return;
        const unlocked = JSON.parse(localStorage.getItem('achievements_' + currentGameUrl) || '[]');
        list.innerHTML = allAchievements.slice(0, 5).map(a => {
            const done = unlocked.includes(a.id);
            return `<div class="achievement-item ${done ? '' : 'locked'}">
                <span class="achievement-icon">${a.icon}</span>
                <div>
                    <div class="achievement-name">${a.name}</div>
                    <div class="achievement-desc">${a.desc}</div>
                </div>
                ${done ? '<i class="fas fa-check achievement-check"></i>' : ''}
            </div>`;
        }).join('');
    }

    function showAllAchievements() {
        const grid = document.getElementById('allAchievementsGrid');
        if (!grid || !currentGameUrl) return;
        const unlocked = JSON.parse(localStorage.getItem('achievements_' + currentGameUrl) || '[]');
        grid.innerHTML = allAchievements.map(a => {
            const done = unlocked.includes(a.id);
            return `<div class="achievement-card ${done ? 'unlocked' : 'locked'}">
                <div class="ach-icon">${a.icon}</div>
                <div class="ach-name">${a.name}</div>
                <div class="ach-desc">${a.desc}</div>
            </div>`;
        }).join('');
    }

    // ‚ïê‚ïê‚ïê PLAYTIME TRACKING ‚ïê‚ïê‚ïê
    function getStoredPlaytime(slug) {
        return parseInt(localStorage.getItem('playtime_' + slug) || '0', 10);
    }

    function startPlaytimeTracking(slug) {
        if (playtimeInterval) clearInterval(playtimeInterval);
        const saved = getStoredPlaytime(slug);
        updatePlaytimeDisplay(saved);
        checkAchievements(saved);
        renderChart(slug);

        playtimeInterval = setInterval(() => {
            let pt = getStoredPlaytime(slug) + 1;
            localStorage.setItem('playtime_' + slug, pt);
            updatePlaytimeDisplay(pt);
            checkAchievements(pt);
            if (pt % 30 === 0) renderChart(slug);
        }, 1000);
    }

    // ‚ïê‚ïê‚ïê CHART ‚ïê‚ïê‚ïê
    function renderChart(slug) {
        const canvas = document.getElementById('playtimeChart');
        if (!canvas) return;

        // Build last-7-days data from playtime
        const labels = [];
        const data = [];
        for (let i = 6; i >= 0; i--) {
            const d = new Date(Date.now() - i * 86400000).toISOString().slice(0, 10);
            const key = 'playtime_daily_' + slug + '_' + d;
            labels.push(d.slice(5)); // MM-DD
            data.push(Math.round(parseInt(localStorage.getItem(key) || '0') / 60));
        }

        const ctx = canvas.getContext('2d');
        if (playtimeChart) playtimeChart.destroy();

        const isDark = html.getAttribute('data-theme') === 'dark';
        const textColor = isDark ? '#6e6e88' : '#555570';
        const gridColor = isDark ? 'rgba(255,255,255,0.07)' : 'rgba(0,0,0,0.08)';

        playtimeChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels,
                datasets: [{
                    data,
                    backgroundColor: 'rgba(0,245,212,0.25)',
                    borderColor: '#00F5D4',
                    borderWidth: 2,
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: { legend: { display: false }, tooltip: {
                    backgroundColor: '#0e0e16',
                    bodyColor: '#00F5D4',
                    callbacks: { label: ctx => ctx.parsed.y + ' min' }
                }},
                scales: {
                    x: { ticks: { color: textColor, font: { size: 10 } }, grid: { color: gridColor } },
                    y: { beginAtZero: true, ticks: { color: textColor, font: { size: 10 } }, grid: { color: gridColor } }
                }
            }
        });
    }

    // Also track daily playtime separately
    function trackDailyPlaytime(slug) {
        const today = new Date().toISOString().slice(0, 10);
        const key = 'playtime_daily_' + slug + '_' + today;
        const cur = parseInt(localStorage.getItem(key) || '0', 10);
        localStorage.setItem(key, cur + 1);
    }

    // ‚ïê‚ïê‚ïê RECENTLY PLAYED ‚ïê‚ïê‚ïê
    function trackRecentlyPlayed(gameUrl) {
        let recent = JSON.parse(localStorage.getItem('recentlyPlayed') || '[]');
        recent = recent.filter(r => r.url !== gameUrl);
        recent.unshift({ url: gameUrl, timestamp: Date.now() });
        recent = recent.slice(0, 20);
        localStorage.setItem('recentlyPlayed', JSON.stringify(recent));
    }

    // ‚ïê‚ïê‚ïê RECOMMENDED GAMES ‚ïê‚ïê‚ïê
    function loadRecommendedGames() {
        const container = document.getElementById('recommendedGames');
        if (!container) return;
        const cat = currentGame.tags && currentGame.tags[0];
        let recs = allGames.filter(g => g.url !== currentGameUrl && g.tags && g.tags.includes(cat)).slice(0, 6);
        if (recs.length < 3) recs = allGames.filter(g => g.url !== currentGameUrl).slice(0, 6);
        container.innerHTML = recs.map(g => `
            <a href="play.html?game=${encodeURIComponent(g.url)}" class="rec-item">
                <img class="rec-img" loading="lazy"
                    src="https://ubghyper.github.io/GameList.github.io/${g.url}/${g.image}"
                    alt="${g.name}"
                    onerror="this.src='https://via.placeholder.com/44x44/0e0e16/00F5D4?text=G'">
                <div>
                    <div class="rec-name">${g.name}</div>
                    <div class="rec-tag">${(g.tags && g.tags[0]) || 'game'}</div>
                </div>
            </a>`).join('');
    }

    // ‚ïê‚ïê‚ïê DISPLAY GAME INFO ‚ïê‚ïê‚ïê
    function displayGameInfo() {
        // Nav title
        const navTitle = document.getElementById('navGameTitle');
        if (navTitle) navTitle.textContent = currentGame.name;

        // Game name in topbar
        const nameDisplay = document.getElementById('gameNameDisplay');
        if (nameDisplay) {
            nameDisplay.innerHTML = currentGame.name.replace(/(\d+)/, '<span>$1</span>');
        }

        // Tag badge
        const tagBadge = document.getElementById('gameTagBadge');
        if (tagBadge) tagBadge.textContent = (currentGame.tags && currentGame.tags[0]) || 'game';

        // Description
        const descEl = document.getElementById('gameDescription');
        if (descEl) descEl.textContent = currentGame.gamedesc || `Play ${currentGame.name} unblocked for free ‚Äî no downloads needed!`;

        // Credits
        const credSmall = document.getElementById('gameCreditsSmall');
        if (credSmall && currentGame.credits) credSmall.textContent = `by ${currentGame.credits}`;
        const credBig = document.getElementById('gameCredits');
        if (credBig && currentGame.credits) credBig.textContent = `Developer: ${currentGame.credits}`;

        // Page title
        document.title = `Play ${currentGame.name} Unblocked Free ‚Äì UnblockedGames67`;

        // Favorite button state
        updateFavoriteBtn();

        // Star rating
        const savedRating = parseInt(localStorage.getItem('rating_' + currentGameUrl) || '0');
        if (savedRating > 0) {
            document.querySelectorAll('.star').forEach((s, i) => {
                s.classList.toggle('active', i < savedRating);
            });
        }

        // Achievements
        renderAchievementsList();
    }

    function updateFavoriteBtn() {
        const btn = document.getElementById('favoriteBtn');
        if (!btn) return;
        const isFav = favorites.includes(currentGameUrl);
        btn.classList.toggle('active', isFav);
        btn.innerHTML = isFav
            ? '<i class="fas fa-heart"></i> Faved'
            : '<i class="far fa-heart"></i> Fave';
    }

    // ‚ïê‚ïê‚ïê LOAD GAME IFRAME ‚ïê‚ïê‚ïê
    function loadGameIframe() {
        const iframe = document.getElementById('gameIframe');
        const loading = document.getElementById('gameLoading');
        const frame = document.getElementById('gameFrame');

        // Build the game URL
        const src = `https://ubghyper.github.io/GameList.github.io/${currentGameUrl}/`;
        iframe.src = src;

        // Hide loading spinner once iframe loads
        iframe.addEventListener('load', () => {
            if (loading) loading.style.display = 'none';
            if (frame) frame.classList.add('neon-border');
        }, { once: true });

        // Fallback: hide after 8 seconds
        setTimeout(() => {
            if (loading) loading.style.display = 'none';
        }, 8000);
    }

    // ‚ïê‚ïê‚ïê UPDATE SEO METAS ‚ïê‚ïê‚ïê
    function updateSEOMeta() {
        const name = currentGame.name;
        const desc = currentGame.gamedesc || `Play ${name} unblocked free online at school ‚Äî no downloads needed!`;
        const url = `https://unblockedgames6767.github.io/play.html?game=${encodeURIComponent(currentGameUrl)}`;
        const img = `https://ubghyper.github.io/GameList.github.io/${currentGameUrl}/${currentGame.image}`;
        const cat = (currentGame.tags && currentGame.tags[0]) || 'games';

        const set = (id, attr, val) => { const el = document.getElementById(id); if (el) el.setAttribute(attr, val); };
        const setText = (id, val) => { const el = document.getElementById(id); if (el) el.textContent = val; };

        set('pageDesc', 'content', `Play ${name} unblocked free online at school with no downloads on UnblockedGames67. ${desc}`);
        set('pageCanonical', 'href', url);
        set('ogUrl', 'content', url);
        set('ogTitle', 'content', `Play ${name} Unblocked Free ‚Äì UnblockedGames67`);
        set('ogDesc', 'content', `${desc} Play instantly at school, no downloads!`);
        set('ogImage', 'content', img);
        set('twTitle', 'content', `Play ${name} Unblocked ‚Äì UnblockedGames67`);
        set('twDesc', 'content', `Play ${name} free unblocked at school on UnblockedGames67!`);
        set('twImage', 'content', img);

        setText('gameSchema', JSON.stringify({
            "@context": "https://schema.org",
            "@type": "VideoGame",
            "name": name + " Unblocked",
            "description": desc,
            "url": url,
            "image": img,
            "genre": cat,
            "gamePlatform": "Web Browser",
            "applicationCategory": "Game",
            "operatingSystem": "Any",
            "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
            "isPartOf": { "@type": "WebSite", "name": "Unblocked Games 67", "url": "https://unblockedgames6767.github.io/" }
        }));

        setText('breadcrumbSchema', JSON.stringify({
            "@context": "https://schema.org",
            "@type": "BreadcrumbList",
            "itemListElement": [
                { "@type": "ListItem", "position": 1, "name": "Unblocked Games 67", "item": "https://unblockedgames6767.github.io/" },
                { "@type": "ListItem", "position": 2, "name": name + " Unblocked", "item": url }
            ]
        }));
    }

    // ‚ïê‚ïê‚ïê LOAD GAME DATA ‚ïê‚ïê‚ïê
    async function loadGameData() {
        try {
            const urlParams = new URLSearchParams(window.location.search);
            const gameParam = urlParams.get('game');

            if (!gameParam) {
                window.location.href = '/';
                return;
            }

            currentGameUrl = gameParam;

            const response = await fetch('https://ubghyper.github.io/assets/games.json');
            if (!response.ok) throw new Error('Failed to load games list');

            allGames = await response.json();
            currentGame = allGames.find(g => g.url === gameParam);

            if (!currentGame) {
                // Game not found ‚Äî show error, don't crash
                document.getElementById('gameNameDisplay').textContent = decodeURIComponent(gameParam);
                document.getElementById('navGameTitle').textContent = decodeURIComponent(gameParam);
                document.getElementById('gameDescription').textContent = 'Game information could not be loaded. The game may still play below.';
                // Still attempt to load the iframe
                const iframe = document.getElementById('gameIframe');
                const loading = document.getElementById('gameLoading');
                iframe.src = `https://ubghyper.github.io/GameList.github.io/${gameParam}/`;
                iframe.addEventListener('load', () => { if (loading) loading.style.display = 'none'; }, { once: true });
                setTimeout(() => { if (loading) loading.style.display = 'none'; }, 8000);
                return;
            }

            displayGameInfo();
            updateSEOMeta();
            loadGameIframe();
            loadRecommendedGames();
            startPlaytimeTracking(gameParam);
            trackRecentlyPlayed(gameParam);
            loadGameNotes();
            updateStreak();

            // Daily playtime tracking interval
            setInterval(() => trackDailyPlaytime(gameParam), 1000);

        } catch (error) {
            console.error('Error loading game:', error);
            const loading = document.getElementById('gameLoading');
            if (loading) loading.innerHTML = '<p style="color:var(--text-dim);">Failed to load game info. <a href="/" style="color:var(--cyan)">Back to home</a></p>';
        }
    }

    function loadGameNotes() {
        const saved = localStorage.getItem('notes_' + currentGameUrl) || '';
        const el = document.getElementById('gameNotes');
        if (el) el.value = saved;
    }

    // ‚ïê‚ïê‚ïê EVENT LISTENERS ‚ïê‚ïê‚ïê
    document.getElementById('saveNotesBtn').addEventListener('click', () => {
        const notes = document.getElementById('gameNotes')?.value || '';
        localStorage.setItem('notes_' + currentGameUrl, notes);
        showToast('Notes saved!');
    });

    document.getElementById('fullscreenBtn').addEventListener('click', () => {
        const iframe = document.getElementById('gameIframe');
        if (iframe.requestFullscreen) iframe.requestFullscreen();
        else if (iframe.webkitRequestFullscreen) iframe.webkitRequestFullscreen();
    });

    document.getElementById('refreshBtn').addEventListener('click', () => {
        const iframe = document.getElementById('gameIframe');
        const src = iframe.src;
        iframe.src = '';
        setTimeout(() => { iframe.src = src; }, 100);
        const loading = document.getElementById('gameLoading');
        if (loading) {
            loading.style.display = 'flex';
            iframe.addEventListener('load', () => { loading.style.display = 'none'; }, { once: true });
            setTimeout(() => { loading.style.display = 'none'; }, 8000);
        }
        showToast('Game refreshed!');
    });

    document.getElementById('favoriteBtn').addEventListener('click', () => {
        const idx = favorites.indexOf(currentGameUrl);
        if (idx > -1) {
            favorites.splice(idx, 1);
            showToast('Removed from favorites');
        } else {
            favorites.push(currentGameUrl);
            showToast('Added to favorites! ‚ù§Ô∏è');
            // Achievement
            const key = 'achievements_' + currentGameUrl;
            const unlocked = JSON.parse(localStorage.getItem(key) || '[]');
            const a = allAchievements.find(x => x.id === 'favorite');
            if (a && !unlocked.includes('favorite')) {
                unlocked.push('favorite');
                localStorage.setItem(key, JSON.stringify(unlocked));
                showAchievement(a);
            }
        }
        localStorage.setItem('favorites', JSON.stringify(favorites));
        updateFavoriteBtn();
    });

    document.getElementById('shareBtn').addEventListener('click', () => {
        const url = window.location.href;
        if (navigator.share) {
            navigator.share({ title: document.title, url });
        } else {
            navigator.clipboard.writeText(url).then(() => showToast('Link copied to clipboard!'));
        }
    });

    document.getElementById('copyLinkBtn').addEventListener('click', () => {
        navigator.clipboard.writeText(window.location.href).then(() => showToast('Link copied!'));
    });

    document.getElementById('newTabBtn').addEventListener('click', () => {
        if (currentGameUrl) {
            window.open(`https://ubghyper.github.io/GameList.github.io/${currentGameUrl}/`, '_blank');
        }
    });

    document.getElementById('achievementsBtn').addEventListener('click', () => {
        showAllAchievements();
        document.getElementById('achievementsModal').classList.add('active');
    });

    document.getElementById('closeAchievementsModal').addEventListener('click', () => {
        document.getElementById('achievementsModal').classList.remove('active');
    });

    document.getElementById('shortcutsBtn').addEventListener('click', () => {
        document.getElementById('shortcutsModal').classList.add('active');
    });

    document.getElementById('shortcutsBtnSide').addEventListener('click', () => {
        document.getElementById('shortcutsModal').classList.add('active');
    });

    document.getElementById('closeShortcutsModal').addEventListener('click', () => {
        document.getElementById('shortcutsModal').classList.remove('active');
    });

    // Close modals on overlay click
    document.getElementById('shortcutsModal').addEventListener('click', e => {
        if (e.target.id === 'shortcutsModal') e.target.classList.remove('active');
    });
    document.getElementById('achievementsModal').addEventListener('click', e => {
        if (e.target.id === 'achievementsModal') e.target.classList.remove('active');
    });

    // Star rating
    document.querySelectorAll('.star').forEach(star => {
        star.addEventListener('click', () => {
            const rating = parseInt(star.dataset.rating);
            document.querySelectorAll('.star').forEach((s, i) => s.classList.toggle('active', i < rating));
            localStorage.setItem('rating_' + currentGameUrl, rating);
            showToast(`Rated ${rating} ‚≠ê`);
            // Achievement
            const key = 'achievements_' + currentGameUrl;
            const unlocked = JSON.parse(localStorage.getItem(key) || '[]');
            const a = allAchievements.find(x => x.id === 'rating');
            if (a && !unlocked.includes('rating')) {
                unlocked.push('rating');
                localStorage.setItem(key, JSON.stringify(unlocked));
                showAchievement(a);
            }
        });
    });

    // Keyboard shortcuts
    document.addEventListener('keydown', e => {
        if (e.target.tagName === 'TEXTAREA' || e.target.tagName === 'INPUT') return;
        switch (e.key.toLowerCase()) {
            case 'f': e.preventDefault(); document.getElementById('fullscreenBtn').click(); break;
            case 'r': e.preventDefault(); document.getElementById('refreshBtn').click(); break;
            case 'h': e.preventDefault(); document.getElementById('favoriteBtn').click(); break;
            case 's': if (e.shiftKey) { e.preventDefault(); document.getElementById('shareBtn').click(); } break;
            case 'a': e.preventDefault(); document.getElementById('achievementsBtn').click(); break;
            case '?': document.getElementById('shortcutsModal').classList.add('active'); break;
            case 'escape':
                document.getElementById('shortcutsModal').classList.remove('active');
                document.getElementById('achievementsModal').classList.remove('active');
                break;
        }
    });

    // ‚ïê‚ïê‚ïê INIT ‚ïê‚ïê‚ïê
    // Load Chart.js then start
    const chartScript = document.createElement('script');
    chartScript.src = 'https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js';
    chartScript.onload = loadGameData;
    chartScript.onerror = loadGameData; // load game even if chart fails
    document.head.appendChild(chartScript);
</script>
</body>
</html>
